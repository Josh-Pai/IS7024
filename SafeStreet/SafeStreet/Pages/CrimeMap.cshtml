@page
@model CrimeMapModel
@{
    ViewData["Title"] = "Crime Map View";
}

<h2>Crime Map View</h2>

<div style="margin-top: 20px;">
    <div>
        <span style="font-size: 20px; font-weight: bold;">📍 Crime Heat Map</span>
        <div style="display: inline-block; margin-left: 20px;">
            <select>
                <option>California</option>
                <option>New York</option>
                <!-- Add more states if needed -->
            </select>
            <select>
                <option>Los Angeles</option>
                <option>San Francisco</option>
                <!-- Add more cities if needed -->
            </select>
        </div>
    </div>

    <div class="crime-map-grid">
        <div class="grid-item high-crime">
            <span>Downtown</span>
            <br />
            <span>Crime Rate: 85/100</span>
        </div>
        <div class="grid-item medium-crime">
            <span>Hollywood</span>
            <br />
            <span>Crime Rate: 65/100</span>
        </div>
        <div class="grid-item low-crime">
            <span>Venice</span>
            <br />
            <span>Crime Rate: 45/100</span>
        </div>
        <div class="grid-item very-low-crime">
            <span>Santa Monica</span>
            <br />
            <span>Crime Rate: 35/100</span>
        </div>
        <div class="grid-item medium-crime">
            <span>Koreatown</span>
            <br />
            <span>Crime Rate: 55/100</span>
        </div>
    </div>
</div>

<!-- Popup tooltip for details -->
<div id="tooltip" style="display: none; position: absolute; background: white; border: 1px solid #ccc; padding: 10px; border-radius: 5px; box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);">
    <span id="tooltip-text"></span>
</div>

<!-- Script for tooltip functionality -->
<script>
    const crimeData = {
        "Venice": { rate: "45/100", totalIncidents: 220, violentCrimes: 50, propertyCrimes: 170 },
        // Add more areas if needed
    };

    document.querySelectorAll('.grid-item').forEach(item => {
        item.addEventListener('mouseenter', function(event) {
            const area = this.innerText.split('\n')[0].trim();
            const data = crimeData[area];
            if (data) {
                document.getElementById('tooltip-text').innerHTML = `
                    <strong>${area}</strong><br>
                    Crime Rate: ${data.rate}<br>
                    Total Incidents: ${data.totalIncidents}<br>
                    Violent Crimes: ${data.violentCrimes}<br>
                    Property Crimes: ${data.propertyCrimes}
                `;
                const tooltip = document.getElementById('tooltip');
                tooltip.style.display = 'block';
                tooltip.style.top = `${event.pageY + 5}px`;
                tooltip.style.left = `${event.pageX + 5}px`;
            }
        });
        item.addEventListener('mouseleave', function() {
            document.getElementById('tooltip').style.display = 'none';
        });
    });
</script>

<!-- CSS styling -->
<style>
    .crime-map-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin-top: 20px;
    }
    .grid-item {
        padding: 20px;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
    }
    .high-crime { background-color: #d32f2f; }
    .medium-crime { background-color: #e57373; }
    .low-crime { background-color: #ef9a9a; }
    .very-low-crime { background-color: #ffcdd2; }
</style>
