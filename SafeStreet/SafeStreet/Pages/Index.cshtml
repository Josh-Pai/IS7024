@page
@using CincinnatiCrime
@model IndexModel
@{
    var brand = ViewData["Brand"] ?? "Crime Data";
    ViewData["Title"] = brand;

    // Chatgpt help
    // Get offenses grouped by neighborhood from ViewData
    var offensesByNeighborhood = ViewData["OffensesByNeighborhood"] as Dictionary<string, List<string>> ?? new Dictionary<string, List<string>>();
    var query = ViewData["Query"] as string ?? string.Empty;
}
    //

<div class="text-center">
    <h1>@brand - Neighborhoods</h1>
    <form method="get">
        <label for="query">Search for Crime Data by Neeighborhood or Offense:</label>
        <input type="text" id="query" name="query" value="@query" />
        <button type="submit">Search</button>
    </form>
</div>

@if (offensesByNeighborhood.Any())
{
    <ul>
        @foreach (var neighborhood in offensesByNeighborhood)
        {
                   <li>
            <strong>@neighborhood.Key (@neighborhood.Value.Count offenses)</strong>
            <ul>
                    @foreach (var offense in neighborhood.Value)
                    {
                        <li>@offense</li>
                    }
            </ul>
        </li>

        }
    </ul>
}
else
{
    <p>No data available for neighborhoods or offenses.</p>
}

